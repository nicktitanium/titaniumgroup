# **Руководство по запуске бота**

**SAI-PROJECT** - это телеграм бот, предназначенный для генерации музыкальных клипов по запросу.
На данный момент генерация видео ряда неотделима от генерации песни

### **Этот бот использует такие ресурсы, как**
- [Suno ai](https://suno.com/)
- [Try Chat GPT](https://trychatgpt.ru/)
- [Kandinsky 3.1](https://www.sberbank.com/promo/kandinsky/)

### **Для взаимодействия с этими сервисами были использованы следующие ресурсы:**
- [Suno-API](https://github.com/gcui-art/suno-api?ysclid=m31q2bf1ky668171121)
- [Selenium](https://pkg.go.dev/github.com/tebeka/selenium#WebDriver>)
- [Telegram Bot Api](https://pkg.go.dev/github.com/tebeka/selenium#WebDriver>)

    

Взаимодействие с нейронными сетями реализованно через селениум, так как используемые сервисы не предоставляют API. Исключением является **Suno ai**, для которой был реализован очень удобный софт. 



### **Важно понимать**
1. Видео может не доставится в чат-бота, поскольку могут возникнуть непредвиденные ошибки или обнавится                  последовательность генерации видео
2. Необходимо регулярно проверять работоспособность ваших аккаунтов **Suno ai** и **Kandinsky 3.1**, так как возможна        блокировка аккаунтов. При возникновении таких ошибок поменяйте аккаунт

## **Установка проекта**

Как только клонируйте проект, обязательно создайте в нем два каталога ./songs и ./clips. В этих каталогах будут хранится ваши сгенерированные видео и песни.

## **Файлы конфигурации**

В проекте обязательно должны быть два файла конфигурации bot_config.yaml и kandinsky_config.yaml

Структура файлов:

**bot_config.yaml**
```
telegram:
  bottoken: !!str <ваш токен>
```
**kandinsky_config.yaml**
``` 
kandinsky:
  email: !!str <ваша электронная почта для аккаунта fusionbrain>
  password: !!str <ваш пароль для аккаунта fusionbrain>
```

## **Suno-api**

1. Запуск **suno-api** на локальном сервере очень хорошо описан здесь <https://github.com/gcui-art/suno-api/blob/main/README.md> 
Поэтому для полного понимания требуется изучить этот материал. Вот краткое описание действий, которые необходимо выполнить для запуска:
    - Установите Node.js (при установке дополнительно скачается пакет менеджер npm, который нам в дальнейшем и понадобится)
    - Руководство по установке Node.js -> <https://translated.turbopages.org/proxy_u/en-ru.ru.6ed5e576-66d1ca82-aa6f9fd5-74722d776562/https/kinsta.com/blog/how-to-install-node-js/>
    - npm необходимо устанавливать в папку suno-api командой npm install (**ОБЯЗАТЕЛЬНО!**)

2. Авторизируйтесь на сайте <https://suno.com/> и скопируйте cookie вашей сессии, опираясь на данное руководство: <https://github.com/gcui-art/suno-api/blob/main/README.md>

3.   Создайте файл окружения (**.env**) в папке suno-api и вставьте в него ваши cookie. **_Пример_**: **SUNO_COOKIE=ваши_куки**

4. Откройте командную строку, перейдите в папку **suno-api** и выполните команду ```npm run dev```
5. Посетите <http://localhost:3000/api/get_limit> для проверки работоспособности API. Если в ответе вы получаете:
```
{
  "credits_left": 50,
  "period": "day",
  "monthly_limit": 50,
  "monthly_usage": 50
}
```
То сервер успешно запщуен


## **Установка Chrome Driver**

### **Драйвер необходим для взаимодействия Selenium с Chrome Browser. Как его скачать?**
1. Узнайте версию Google Chrome, которой вы пользуетесь. Для этого нужно нажать на три точки в правом верхнем углу, далее браузера/справка/о браузере Google Chrome
2. Установите архив с драйвером для вашей версии браузера (важны первые две цифры в версии!) и ос по этой ссылке   <https://developer.chrome.com/docs/chromedriver/downloads?hl=ru>
3. Извлечь исполняемый файл необходимо в папку **путь_до_папки_проекта**/sai_project/chromedriver

Проверьте работоспособность вашего драйвера, запустив исполняемый файл



